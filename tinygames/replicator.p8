pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
local scene = "main"
local player

function grid_coords(x, y)
    return {
        x=(x*8),
        y=(y*8)
    }
end

--gremlin class
local gremlin = {}
gremlin.__index = gremlin


function gremlin.new(x, y)
    coords = grid_coords(x,y)
    new_gremlin = {
        grid_x = x,
        grid_y = y,
        x = coords.x,
        y = coords.y,
        direction= 'up'
    }
    setmetatable(new_gremlin, gremlin)
    return new_gremlin
end

function gremlin:draw()
    if self.direction == 'up' or self.direction == 'down' then
        sprite = 2
        flip_x = false
        flip_y = self.direction == 'down'
    else 
        sprite = 1
        flip_y = false
        flip_x = self.direction == 'right'
    end
    spr(
        sprite,
        self.x,
        self.y,
        1,1,
        flip_x, flip_y
    )
end

function gremlin:update()
    if btnp(⬆️) then 
        self.grid_y -= 1
        self.direction = 'up'
    end

    if btnp(⬇️) then 
        self.grid_y += 1
        self.direction = 'down'
    end

    if btnp(⬅️) then 
        self.grid_x -= 1
        self.direction = 'left'
    end
    
    if btnp(➡️) then 
        self.grid_x += 1
        self.direction = 'right'
    end

    coords = grid_coords(self.grid_x, self.grid_y)
    if self.x < coords.x then
        self.x += 1
    elseif self.x > coords.x then
        self.x -= 1
    end
    
    if self.y < coords.y then
        self.y += 1
    elseif self.y > coords.y then
        self.y -= 1
    end
end

--end gremlin class



function draw_grid()
    rect(0,0,127,127,5)
    for y = 1, 16 do
        for x = 1, 16 do
            line((x*8)-1,(y*8), (x*8)+1, (y*8), 5)
            line((x*8), (y*8)-1, (x*8), (y*8)+1)
        end
    end
end

function _init()
    player = gremlin.new(10,10)
end

function _update()
    player:update()
end

function _draw()
    cls()
    draw_grid()
    player:draw()
end
__gfx__
00000000600666666660066606666660066666600666666006666660445554454441444102222220011111100111111004444440000000000000000000000000
000000006666663606000060699999966cccccc6688888866bbbbbb6555544451111444128eeeef21cdddd61133333b14f9999a4000000000000000000000000
007007006006366306000060699999966cccccc6688888866bbbbbb654454445444144412e7788e21d77ccd11377bb314977aa94000000000000000000000000
000770000006666366666666699999966cccccc6688888866bbbbbb654454445444144412e7888e21d7cccd1137bbb31497aaa94000000000000000000000000
000770000006666366366366699999966cccccc6688888866bbbbbb644454455444144412e888fe21dccc6d113bbba3149aaaf94000000000000000000000000
007007006006366366666666699999966cccccc6688888866bbbbbb644454455444144412e88ffe21dcc66d113bbaa3149aaff94000000000000000000000000
000000006666663663666636699999966cccccc6688888866bbbbbb644455555444111112feeee8216ddddc11b3333314a9999f4000000000000000000000000
00000000600666666633336606666660066666600666666006666660445554454441444102222220011111100111111004444440000000000000000000000000
000000000bbbb000000bbb000000000033bbb3300000000000000000000000000000000000888800001111000033330000999900000000000000000000000000
0000000000b8bb0000b8b83000000000038b8300000000000000000000000000000000000877ee800177cc100377bb300977aa90000000000000000000000000
0000000000bbb00b000bbb0b0000000005bbb50000000000000000000000000000000000877eee88177ccc11377bbb33977aaa99000000000000000000000000
0000000000444bb00005555b00bbb000055555000000000000000000000000000000000087eee88817ccc11137bbb33397aaa999000000000000000000000000
0000000000444000000555000b8b830000555000000000000000000000000000000000008eee88881ccc11113bbb33339aaa9999000000000000000000000000
00000000004440000005550000bbb00000555000000000000000000000000000000000008ee888e81cc111c13bb333b39aa999a9000000000000000000000000
0000000000505000000b0b000555550000b0b0000000000000000000000000000000000008888e8001111c1003333b3009999a90000000000000000000000000
0000000000b0b000000b3bb0b05550b000b3bb000000000000000000000000000000000000888800001111000033330000999900000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000111100001111000011110000111100000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000001788710017cc710017bb710017aa710000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000177772e1177775d11777753117777491000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000018788e811c7ccdc11b7bb3b11a7aa9a1000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000018788e811c7ccdc11b7bb3b11a7aa9a1000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000172ee2e1175dd5d11753353117499491000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000001e88e1001dccd10013bb310019aa910000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000111100001111000011110000111100000000000000000000000000
